{% extends "base.html" %}{% block title %}Moje zwierzaki • PetNavigator{% endblock %}
{% block content %}
<h1 class="h4 mb-3">Moje zwierzaki</h1>

<div class="card p-3 mb-3 shadow-sm">
  <form class="row g-2" hx-post="{% url 'pets_create' %}" hx-target="#toast-container" hx-swap="beforeend">
    {% csrf_token %}
    <div class="col-md-5"><input class="form-control" name="name" placeholder="Imię" required></div>
    <div class="col-md-5"><input class="form-control" name="species" placeholder="Gatunek (np. dog, cat)" required></div>
    <div class="col-md-2 d-grid"><button class="btn btn-primary btn-pill"><i class="bi bi-plus-lg me-1"></i> Dodaj</button></div>
  </form>
</div>

<div class="row g-3">
{% for p in pets %}
  <div class="col-md-6">
    <div class="card shadow-sm h-100">
      <div class="card-body d-flex justify-content-between align-items-center">
        <div>
          <div class="fw-semibold">{{ p.name }}</div>
          <div class="hint">{{ p.species }}</div>
        </div>
        <div class="d-flex gap-2">
          <form class="d-flex gap-2" hx-post="{% url 'pets_edit' p.id %}" hx-target="#toast-container" hx-swap="beforeend">
            {% csrf_token %}
            <input class="form-control form-control-sm" name="name" placeholder="Nowe imię">
            <input class="form-control form-control-sm" name="species" placeholder="Nowy gatunek">
            <button class="btn btn-outline-secondary btn-sm btn-pill">Zapisz</button>
          </form>
          <form hx-post="{% url 'pets_delete' p.id %}" hx-target="#toast-container" hx-swap="beforeend"
                _="on htmx:afterOnLoad remove closest .col-md-6">
            {% csrf_token %}
            <button class="btn btn-outline-danger btn-sm btn-pill"><i class="bi bi-trash"></i></button>
          </form>
        </div>
      </div>
    </div>
  </div>
{% empty %}
  <p class="hint">Brak pupili. Dodaj pierwszego.</p>
{% endfor %}
</div>
{% endblock %}
